publish:
  steam:
    targets:
      Default:
        vdf_source: ./steam/windows.vdf
        platform: Windows
        arch: X64
        description: Look out the windows

        # The working directory will always be the local crate root
        # If you need to access the target folder, it will be in the workspace root
        binary_dir: ../../target/bonk/release/windows/x64

      Default_macOS:
        vdf_source: ./steam/windows.vdf
        platform: Macos
        arch: Arm64

        # The working directory will always be the local crate root
        # If you need to access the target folder, it will be in the workspace root
        binary_dir: ../../target/bonk/release/macOS/Arm64

      SteamDeck:
        vdf_source: ./steam/linux.vdf
        platform: Linux
        arch: X64
        description: I use Arch by the way

        # Sometimes you might want to get binaries from another directory
        binary_dir: ../../target/bonk/release/linux/x64
  
  epic_games_store:
    targets:
      Default:
        cloud_dir: /
        # Required by epic, can be different from local build platform
        platform_name: Windows
        app_launch: ./{{ template_id }}.exe
        platform: Windows
        arch: X64
        description: It's unreal how epic this build is
        # No need for binary dir, the default works

      Default_macOS:
        cloud_dir: /
        # Required by epic, can be different from local build platform
        platform_name: macOS
        app_launch: ./{{ template_id }}.dmg
        platform: Macos
        arch: Arm64
        # No need for binary dir, the default works
  
  msstore:
    targets:
      Default:
        publish_type: Simple
        arch: X64
        description: Pay the bill at the gates
        msix: ./{{ template_id }}.msix

      # A complete bogus target for macOS. Would never pass through MS Store's pipeline,
      # but since we're not actually executing the command in the test, it's fine.
      # Only tests the command generation for bonk, 
      # and doesn't require us to somehow get an msix from a non-macOS runner to the macOS machine.
      Default_macOS:
        publish_type: Simple
        arch: X64
        msix: ./{{ template_id }}.dmg
        binary_dir: ../../target/bonk/release/macos/arm64
  
  apple_store:
    targets:
      Default:
        platform: Macos
        arch: Arm64
        # Technically illegal, since DMGs cannot be uploaded to the Apple Store, but works for testing
        # if commands are generated correctly
        package: ./{{ template_id }}.dmg

      # A complete bogus target for Windows. Would never pass through Apple's pipeline,
      # but since we're not actually executing the command in the test, it's fine.
      # Only tests the command generation for bonk, 
      # and doesn't require us to somehow get a flat package from a macOS runner to the Windows machine.
      Default_Windows:
        platform: Macos
        arch: X64
        package: ./{{ template_id }}.msix
        binary_dir: ../../target/bonk/release/windows/x64

  play_store:
    targets:
      nl.traverse_research.evolve:
        platform: Android
        arch: Arm64
        # This is only an example, normally this would be an .aab, but it's easier to build apks for testing
        aab_name: {{ template_id }}.apk
        tracks:
          - track: internal-testing
            release: Evolve

          - track: production
            release: Evolve
